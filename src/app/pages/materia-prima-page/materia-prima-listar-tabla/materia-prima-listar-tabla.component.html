<div class="example-container mat-elevation-z8">

    @if(isLoadingResult || isRateLimitReached){
        <div class="example-loading-shade">
            @if(isLoadingResult){
                <mat-spinner></mat-spinner>
            }
            @if(isRateLimitReached){
                <div class="example-rate-limit-reached">
                    ...
                </div>
            }
        </div>
    }

    <div class="example-table-container">
        <table mat-table [dataSource]="dataSource" class="example-table">

            <ng-container matColumnDef="idMateriaPrima">
                <th mat-header-cell *matHeaderCellDef>Id</th>
                <td mat-cell *matCellDef="let materiaPrima">{{materiaPrima.idMateriaPrima}}</td>
            </ng-container>

            <ng-container matColumnDef="nombreMateriaPrima">
                <th mat-header-cell *matHeaderCellDef>Materia Prima</th>
                <td mat-cell *matCellDef="let materiaPrima">{{materiaPrima.nombreMateriaPrima}}</td>
            </ng-container>

            <ng-container matColumnDef="stockActual">
                <th mat-header-cell *matHeaderCellDef>Stock</th>
                <td mat-cell *matCellDef="let materiaPrima">{{materiaPrima.stockActual}}</td>
            </ng-container>

            <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef>Acciones</th>
                <td mat-cell *matCellDef="let materiaPrima">
                    <button
                        mat-icon-button
                        [matMenuTriggerFor]="accionesMateriaPrima"
                        matTooltip="Acciones"
                        matTooltipPosition="left"
                    >
                        <mat-icon>more_vert</mat-icon>
                    </button>

                    <!-- MENU -->
                    <mat-menu #accionesMateriaPrima="matMenu" xPosition="before" class="custom-panel">

                        <!-- Ver las compras de una materia prima -->
                        <button mat-menu-item class="btn-acciones" (click)="getAllComprasByMateriaPrima.emit({
                            idMateriaPrima: materiaPrima.idMateriaPrima,
                            materiaPrima: materiaPrima.nombreMateriaPrima
                        })">
                            <mat-icon>history</mat-icon>
                            <span>Compras Realizadas</span>
                        </button>

                    </mat-menu>

                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columns"></tr>
            <tr mat-row *matRowDef="let row; columns: columns"></tr>
        </table>

        <mat-paginator
            [length]="totalElementos"
            [pageSize]="tamanioPagina"
        >
        </mat-paginator>

    </div>

</div>