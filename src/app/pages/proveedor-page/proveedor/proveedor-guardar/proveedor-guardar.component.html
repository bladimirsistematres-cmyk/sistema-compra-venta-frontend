@defer (when !isLoading && !isSubmitting) {
    
    @if(isSubmitting){
        <mat-progress-bar mode="query"></mat-progress-bar>
    }

    <p>
        @if (!proveedor) {
            REGISTRAR PROVEEDOR
        }@else{
            EDITAR PROVEEDOR
        }
    </p>

    @if (formProveedor) {
        <div class="content">
    
            <mat-dialog-content>
                <form [formGroup]="formProveedor">
    
                    <mat-form-field>
                        <mat-label>Nombre Proveedor </mat-label>
                        <input type="text" matInput formControlName="nombreComercial" (input)="toUpperCaseField('nombreComercial')"/>
                        @if(formProveedor.get("nombreComercial")?.hasError("required")){
                            <mat-error>Este campo es obligatorio</mat-error>
                        }
                        @if(formProveedor.get("nombreComercial")?.hasError("minlength")){
                            <mat-error>Mínimo 3 caracteres</mat-error>
                        }
                        @if(formProveedor.get("nombreComercial")?.hasError("maxlength")){
                            <mat-error>Máximo 25 caracteres</mat-error>
                        }
                    </mat-form-field>
                    
                    <mat-form-field>
                        <mat-label>C.i. </mat-label>
                        <input type="text" matInput formControlName="identificacionFiscal"/>
                        @if(formProveedor.get("identificacionFiscal")?.hasError("required")){
                            <mat-error>Este campo es obligatorio</mat-error>
                        }
                        @if(formProveedor.get("identificacionFiscal")?.hasError("minlength")){
                            <mat-error>Mínimo 7 caracteres</mat-error>
                        }
                        @if(formProveedor.get("identificacionFiscal")?.hasError("maxlength")){
                            <mat-error>Máximo 10 caracteres</mat-error>
                        }
                    </mat-form-field>
        
                    <mat-form-field>
                        <mat-label>Correo Electrónico (Opcional)</mat-label>
                        <input type="text" matInput formControlName="correoElectronico"/>
                        @if(formProveedor.get("correoElectronico")?.hasError("email")){
                            <mat-error>{{errorEmail}}</mat-error>
                        }
                    </mat-form-field>
        
                    <mat-form-field>
                        <mat-label>Dirección </mat-label>
                        <input type="text" matInput formControlName="direccion" (input)="toUpperCaseField('direccion')"/>
                        @if(formProveedor.get("direccion")?.hasError("required")){
                            <mat-error>Este campo es obligatorio</mat-error>
                        }
                        @if(formProveedor.get("direccion")?.hasError("minlength")){
                            <mat-error>Mínimo 5 caracteres</mat-error>
                        }
                        @if(formProveedor.get("direccion")?.hasError("maxlength")){
                            <mat-error>Máximo 30 caracteres</mat-error>
                        }
                    </mat-form-field>
        
                    <mat-form-field>
                        <mat-label>Sitio Web (Opcional)</mat-label>
                        <input type="text" matInput formControlName="enlacePagina"/>
                    </mat-form-field>
        
                    <mat-form-field>
                        <mat-label>Tipo de Proveedor </mat-label>
                        <mat-select formControlName="tipoProveedor">
                            @for (proveedor of tipoProveedores; track proveedor){
                                <mat-option [value]="proveedor">{{proveedor}}</mat-option>
                            }
                        </mat-select>
                        <mat-hint>Seleccionar Tipo de Proveedor</mat-hint>
                        @if(formProveedor.get("tipoProveedor")?.hasError("required")){
                            <mat-error>Este campo es obligatorio</mat-error>
                        }
                    </mat-form-field>
        
                    <mat-form-field>
                        <mat-label>Ciudad Pertenenciente </mat-label>
                        <mat-select formControlName="idCiudad">
                            @for (ciudad of ciudades; track ciudad.idCiudad){
                                <mat-option [value]="ciudad.idCiudad">
                                    {{ciudad.nombreCiudad}}
                                </mat-option>
                            }
                        </mat-select>
                        <mat-hint>Seleccionar Ciudad</mat-hint>
                        @if(formProveedor.get("idCiudad")?.hasError("required")){
                            <mat-error>Este campo es obligatorio</mat-error>
                        }
                    </mat-form-field>
                    
                </form>
            </mat-dialog-content>

    
        </div>
    
        <mat-dialog-actions align="end">
            <button mat-stroked-button mat-dialog-close="" ><mat-icon>close</mat-icon>Cancelar</button>
            <button mat-flat-button [disabled]="formProveedor.invalid" (click)="saveProveedor()">  
                <mat-icon>check</mat-icon>
                {{proveedor ? 'Actualizar' : 'Registrar'}}
            </button>
        </mat-dialog-actions>
    }
}
@placeholder {
    <div class="content-placeholder">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Cargando Proveedor...</p>
    </div>
}